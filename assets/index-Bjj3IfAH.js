(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();let c=4,f=4;window.onload=function(){p()};const h=document.querySelector("#board");let r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];function p(){for(let e=0;e<c;e++)for(let t=0;t<f;t++){let n=document.createElement("div");n.id=e.toString()+"-"+t.toString();let i=r[e][t];d(n,i),h.appendChild(n)}s(),s()}function d(e,t){e.className="x0",e.innerHTML="",t>0&&(e.innerText=t.toString(),e.className="x"+e.innerText)}document.addEventListener("keydown",e=>{e.code=="ArrowLeft"?(E(),s()):e.code=="ArrowRight"?(S(),s()):e.code=="ArrowUp"?(L(),s()):e.code=="ArrowDown"&&(M(),s())});function s(){if(!y())return;let e=!1;for(;!e;){let t=Math.floor(Math.random()*f),n=Math.floor(Math.random()*c);if(r[t][n]===0){r[t][n]=2;let i=document.getElementById(`${t}-${n}`),o=Math.ceil(Math.random()*10);i.innerText=o>9?"4":"2",i.className=o>9?"x4":"x2",e=!0}}}function y(){return r.some(e=>e.includes(0))}function S(){for(let e=0;e<f;e++){let t=r[e];t.reverse(),t=u(t),r[e]=t.reverse();for(let n=0;n<c;n++){let i=document.getElementById(e.toString()+"-"+n.toString()),o=r[e][n];d(i,o)}}}function u(e){e=g(e);for(let t=0;t<e.length-1;t++)if(e[t]==e[t+1]){e[t]+=e[t],m=I(e[t]);let n=document.querySelector("#PointsId");n.innerHTML="Points: "+m,e[t+1]=0}for(e=g(e);e.length<c;)e.push(0);return e}function g(e){return e.filter(t=>t!==0)}function L(){for(let e=0;e<c;e++){let t=[r[0][e],r[1][e],r[2][e],r[3][e]];t=u(t),r[0][e]=t[0],r[1][e]=t[1],r[2][e]=t[2],r[3][e]=t[3];for(let n=0;n<c;n++){let i=document.getElementById(n.toString()+"-"+e.toString()),o=r[n][e];d(i,o)}}}function M(){for(let e=0;e<c;e++){let t=[r[3][e],r[2][e],r[1][e],r[0][e]];t=u(t),r[3][e]=t[0],r[2][e]=t[1],r[1][e]=t[2],r[0][e]=t[3];for(let n=0;n<c;n++){let i=document.getElementById(n.toString()+"-"+e.toString()),o=r[n][e];d(i,o)}}}function E(){for(let e=0;e<f;e++){let t=r[e];t=u(t),r[e]=t;for(let n=0;n<c;n++){let i=document.getElementById(e.toString()+"-"+n.toString()),o=r[e][n];d(i,o)}}}let m=0;function I(e){return m+=e}
